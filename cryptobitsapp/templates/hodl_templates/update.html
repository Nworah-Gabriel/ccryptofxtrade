{% extends 'hodl_templates/dashbase.html' %}
{% load static %}
  {% block content %}
<!-- End Navbar -->
<style>/* The alert message box */
  .alert_message {
      margin-top: 30px;
    padding: 20px;
    background-color: #173e43;
    color: white;
    display:none;
  }
  
  .closebtn_message {
    margin-left: 15px;
    color: white;
    font-weight: bold;
    float: right;
    font-size: 22px;
    line-height: 20px;
    cursor: pointer;
    transition: 0.3s;
  }
  
  .closebtn_message:hover {
    color: black;
  }</style>
 <div class="container-fluid">
  <div class="page-header min-height-300 border-radius-xl mt-4" style="background-image: url('{% static 'hodl_static/assets/img/curved-images/curved0.jpg' %}'); background-position-y: 50%;">
    <span class="mask bg-gradient-primary opacity-6"></span>
  </div>
  <div class="card card-body blur shadow-blur mx-4 mt-n6 overflow-hidden">
    <div class="row gx-4">
      <div class="col-auto">
        <div class="avatar avatar-xl position-relative">
          <img src="{% static 'hodl_static/assets/img/bruce-mars.jpg' %}" alt="profile_image" class="w-100 border-radius-lg shadow-sm">
        </div>
      </div>
      <div class="col-auto my-auto">
        <div class="h-100">
          <h5 class="mb-1">
            {{user.first_name }}  {{user.last_name}}
          </h5>
        </div>
      </div>
      
    </div>
  </div>
</div>
<div class="container-fluid py-4">
  <div class="row">
 
    <div class="col-12 col-xl-12">
      <div class="card h-100">
        <div class="card-header pb-0 p-3">
          <div class="row">
            <div class="col-md-8 d-flex align-items-center">
              <h6 class="mb-0">Profile Information</h6>
            </div>
            <div class="col-md-4 text-end">
              <a href="javascript:;">
                <i class="fas fa-user-edit text-secondary text-sm" data-bs-toggle="tooltip" data-bs-placement="top" title="Edit Profile"></i>
              </a>
            </div>
          </div>
        </div>
        <div class="alert_message" id="alertUpdate" style="background-color:{{color}};">
          <span class="closebtn_message" onclick="this.parentElement.style.display='none';">&times;</span>
          <p id="alertUpdateMessage"></p>
        </div>
        <div class="card-body p-3" id="userformdiv">
              <form action="" id="formUserDetail" method="POST">
                {% csrf_token%}
                <input type="hidden" name="form_type" value="formuserdetail" >

                  <div class="row">

                    <div class="col-lg-5">
                      <div class="form-group">
                        
                        
                        
                        <label for="">Username</label>
                        <input type="text"
                          class="form-control"  id="{{userdetailform.username.name}}" aria-describedby="helpId" placeholder="{{user.username}}" value= "{{user.username}}" readonly>
                      </div>
                    </div>
                    <div class="col-lg-5">
                      <div class="form-group">
                        <label for="">Email Address</label>
                        <input type="email" class="form-control" name="{{userdetailform.email.name}}" id="" aria-describedby="helpId" placeholder="{{user.email}}" >
                      </div>
                    </div>
                    <div class="col-lg-5">
                      <div class="form-group">
                        <label for="">First name</label>
                        <input type="text"
                          class="form-control" name="{{userdetailform.firstname.name}}" id="" aria-describedby="helpId" placeholder="{{user.first_name}}" >
                      </div>
                  </div>

                    

                    <div class="col-lg-5">
                      <div class="form-group">
                        <label for="">Last Name </label>
                        <input type="text"
                          class="form-control" name="{{userdetailform.lastname.name}}" id="" aria-describedby="helpId" placeholder="{{user.last_name}}" >
                      </div>
                   
                    </div>

                    <div class="col-lg-2"></div>

                  </div>
             

              <div class="card-header pb-0 p-3">
                <div class="row">
                  <div class="col-md-8 d-flex align-items-center">
                    <h6 class="mb-0">Other Information</h6>
                  </div>
                </div>
              </div>

              <div class="row">
               
                <div class="col-lg-5">
                  <div class="form-group">
                    <label for="">Country</label>
                    <input type="text" class="form-control" name="{{userdetailform.country.name}}" id="" aria-describedby="helpId" placeholder="{{information.country}}" value="">
                  </div>
                </div>
                <div class="col-lg-5">
                  <div class="form-group">
                    <label for="">Postal Code</label>
                    <input type="text" class="form-control" name="{{userdetailform.postal_code.name}}" id="" aria-describedby="helpId" placeholder="{{information.postal_code}}" value="">
                  </div>
                </div>
               
               
                <div class="col-lg-5">
                  <div class="form-group">
                    <label for="">Date of Birth- currently:({{information.date_of_birth}})</label>
                    <input type="date" class="form-control" name="{{userdetailform.date_of_birth.name}}" id="" aria-describedby="helpId" placeholder="" >
                  </div>
                </div>
                
                <div class="col-lg-2"></div>
              </div>

              <div class="update my-4">
              <button type="submit" class="btn btn-primary align">Save</button>
            </div>

            </form>
        </div>
      </div>
    </div>

   
  </div>

  <div class="row mt-5">
 
    <div class="col-12 col-xl-12">
      <div class="card h-100">
        <div class="card-header pb-0 p-3">
          <div class="row">
            <div class="col-md-8 d-flex align-items-center">
              <h6 class="mb-0">Withdrawal Information</h6>
            </div>
            <div class="col-md-4 text-end">
              <a href="javascript:;">
                <i class="fas fa-user-edit text-secondary text-sm" data-bs-toggle="tooltip" data-bs-placement="top" title="Edit Profile"></i>
              </a>
            </div>
          </div>
        </div>
        <div class="alert_message" id="alertUpdateaddress" style="background-color:{{color}};">
          <span class="closebtn_message" onclick="this.parentElement.style.display='none';">&times;</span>
          <p id="alertUpdateaddressMessage"></p>
        </div>
        <div class="card-body p-3">
              <form action="" method="POST" id ="formWithdrawalDetail">
               
                <input type="hidden" name="form_type" value="formwithdrawaldetail" >
                {% csrf_token%}
                <h4>Bank Information</h4>
                  <div class="row">
                    <div class="col-lg-10">
                      <div class="form-group">
                        <label for="">Bank Name</label>
                        <input type="text"
                          class="form-control" name="{{withdrawaldetailform.bank_name.name}}" id="" aria-describedby="helpId" placeholder="{{user_bank_detail.bank_name}}" value="" >
                      </div>
                      <div class="form-group">
                        <label for="">Account Name</label>
                        <input type="text"
                          class="form-control" name="{{withdrawaldetailform.account_name.name}}" id="" aria-describedby="helpId" placeholder="{{user_bank_detail.account_name}}" value="" >
                      </div>
                      <div class="form-group">
                        <label for="">Account Number</label>
                        <input type="text" class="form-control" name="{{withdrawaldetailform.account_number.name}}" id="" aria-describedby="helpId" placeholder="{{user_bank_detail.account_number}}" value="" >
                      </div>
                    </div>

                    <div class="col-lg-2"></div>

                  </div>

                  <h4 class="mt-5"> Withdrawal Address</h4>
                  <div class="row">
                    <div class="col-lg-10" value="">
                     <form>
                    
                      <div class="form-group">
                        <label for="">Bitcoin</label>
                        <input type="text"
                          class="form-control" name="{{withdrawaldetailform.btc.name}}" id="" aria-describedby="helpId" placeholder="{{user_address_detail.btc}}" value="" >
                      </div>
                   
                      <div class="form-group">
                        <label for="">Ethereum</label>
                        <input type="text"
                          class="form-control" name="{{withdrawaldetailform.eth.name}}" id="" aria-describedby="helpId" placeholder="{{user_address_detail.eth}}" value="">
                      </div>
                      <div class="form-group">
                        <label for="">BNB</label>
                        <input type="text" class="form-control" name="{{withdrawaldetailform.bnb.name}}" id="" aria-describedby="helpId" placeholder="{{user_address_detail.bnb}}" value="">
                      </div>
                      <div class="form-group">
                        <label for="">XRP</label>
                        <input type="text" class="form-control" name="{{withdrawaldetailform.xrp.name}}" id="" aria-describedby="helpId" placeholder="{{user_address_detail.xrp}}" value="" >
                      </div>
                      <div class="form-group">
                        <label for="">BCH</label>
                        <input type="text" class="form-control" name="{{withdrawaldetailform.bch.name}}" id="" aria-describedby="helpId" placeholder="{{user_address_detail.bch}}" value="" >
                      </div>
                      <div class="form-group">
                        <label for="">DODGE</label>
                        <input type="text" class="form-control" name="{{withdrawaldetailform.dodge.name}}" id="" aria-describedby="helpId" placeholder="{{user_address_detail.dodge}}" value="">
                      </div>
                    </div>

                    <div class="col-lg-2"></div>
 
                  </div>
             

              

              <div class="update my-4">
              <button type="submit" class="btn btn-primary align">Save</button>
            </div>

            </form>
        </div>
      </div>
    </div>

   
  </div>

</div>
  </div>

  <!--   Core JS Files   -->
  <script>
  const form_userdetail = document.getElementById("formUserDetail");
  

  form_userdetail.addEventListener("submit", submitHandler);
  function submitHandler(e){
      e.preventDefault()
      $.ajax({
          type:"POST",
          url :"{% url 'update_userdetail' %}",
          data :  $("#formUserDetail").serialize(),

          // data : $("#formWithdraw").serialize(),
          dataType:'json',
          success:function(data){
              if (data.msg === "Success"){
                  const alert = document.getElementById("alertUpdate");
                  alert.style.display = 'block';
                  alert.style.background = "green";
                  $("#alertUpdateMessage").text(data.response)
                  form_userdetail.reset()
                  
                  
                  
                  }
              else if (data.msg === "Invalid"){
                  const alert = document.getElementById("alertUpdate");
                  alert.style.display = 'block';
                  alert.style.background = "red";
                  $("#alertUpdateMessage").text(data.response)
                  }
              else if (data.msg === "Fail"){
                  const alert = document.getElementById("alertUpdate");
                  alert.style.display = 'block';
                  alert.style.background = "red";
                  $("#alertUpdateMessage").text(data.response)
              }
              else{
                  const alert = document.getElementById("alertUpdate");
                  alert.style.display = 'block';
                  alert.style.background = "red";
                  $("#alertUpdateMessage").text("An Unexpected Error Occured")

                }
          }
  

        })
  }

  // withdrawal form
  const form_withdrawaldetail = document.getElementById("formWithdrawalDetail");
  form_withdrawaldetail.addEventListener("submit", submitHandlerWithdraw);
  function submitHandlerWithdraw(e){
      e.preventDefault()
      $.ajax({
          type:"POST",
          url :"{% url 'update_userwithdrawaldetail' %}",
          data :  $("#formWithdrawalDetail").serialize(),

          // data : $("#formWithdraw").serialize(),
          dataType:'json',
          success:function(data){
              if (data.msg === "Success1"){
                  const alert = document.getElementById("alertUpdateaddress");
                  alert.style.display = 'block';
                  alert.style.background = "green";
                  $("#alertUpdateaddressMessage").text(data.response)
                  // form_withdrawaldetail.reset()
                  
                  
                  
                  }
              else if (data.msg === "Invalid1"){
                  const alert = document.getElementById("alertUpdate");
                  alert.style.display = 'block';
                  alert.style.background = "red";
                  $("#alertUpdateMessage").text(data.response)
                  }
              else if (data.msg === "Failed1"){
                  const alert = document.getElementById("alertUpdate");
                  alert.style.display = 'block';
                  alert.style.background = "red";
                  $("#alertUpdateMessage").text(data.response)
              }
              else{
                  const alert = document.getElementById("alertUpdate");
                  alert.style.display = 'block';
                  alert.style.background = "red";
                  $("#alertUpdateMessage").text("An Unexpected Error Occured")

                }
          }
  

        })
  }



  </script>


  {%endblock%}