

{% extends 'aptiv_templates/Dashboard/__dash_base.html' %}
{% load static %}
  {% block content %}
  

    {% include 'aptiv_templates/Dashboard/__side_bar_mini.html' %}



    {% include 'aptiv_templates/Dashboard/_header.html' %}
 


    <!-- start page content wrapper-->
    <div class="page-content-wrapper">
      <!-- start page content-->
      <div class="page-content">


        
        <div class="row">
            <div class="col-lg-8 mx-auto">
              <div class="card radius-10">
                <div class="card-body">
                  <form action="" id="formUserDetail" method="POST">
                    {% csrf_token%}
                    <input type="hidden" name="form_type" value="formuserdetail" >
                  <h5 class="mb-3">Edit Profile</h5>
                  <div class="mb-4 d-flex flex-column gap-3 align-items-center justify-content-center">
                    <div class="user-change-photo shadow">
                      <img src="{% static 'aptiv_static/dashboard/assets/images/avatars/profile.jpg' %}" alt="...">
                    </div>
                    <!-- <button type="button" class="btn btn-outline-primary btn-sm radius-30 px-4"><ion-icon name="image-sharp"></ion-icon>{{user.username}}</button> -->

                  </div>
                  <div class="alert_message" id="alertUpdate" style="background-color:{{color}};">
                    <span class="closebtn_message" onclick="this.parentElement.style.display='none';">&times;</span>
                    <p id="alertUpdateMessage"></p>
                  </div>
                  <h5 class="mb-0 mt-4">User Information</h5>
                  <hr>
                  <div class="row g-3">
                    <div class="col-6">
                       <label class="form-label">Username</label>
                       <input type="text"
                          class="form-control"  id="{{userdetailform.username.name}}" aria-describedby="helpId" placeholder="{{user.username}}" value= "{{user.username}}" readonly>
                    </div>
                    <div class="col-6">
                     <label class="form-label">Email address</label>
                     <input type="email" class="form-control" name="{{userdetailform.email.name}}" id="" aria-describedby="helpId" placeholder="{{user.email}}" >
                   </div>
                     <div class="col-6">
                       <label class="form-label">First Name</label>
                       <input type="text"
                       class="form-control" name="{{userdetailform.firstname.name}}" id="" aria-describedby="helpId" placeholder="{{user.first_name}}" >
                   </div>
                
                   <div class="col-6">
                       <label class="form-label">Last Name</label>
                       <input type="text"
                       class="form-control" name="{{userdetailform.lastname.name}}" id="" aria-describedby="helpId" placeholder="{{user.last_name}}" >
                   </div>
                 </div>
    
                 <h5 class="mb-0 mt-4">Contact Information</h5>
                 <hr>
                 <div class="row g-3">
                  <div class="col-12">
                    <label class="form-label">Address</label>
                    <input type="text" class="form-control" name="{{userdetailform.address.name}}" id="" aria-describedby="helpId" placeholder="{{information.address}}" value="">
                   </div>
                  
                   <div class="col-6">
                    <label class="form-label">Country</label>
                    <input type="text" class="form-control" name="{{userdetailform.country.name}}" id="" aria-describedby="helpId" placeholder="{{information.country}}" value="">
                  </div>
                  <div class="col-6">
                    <label class="form-label">Postal Code</label>
                    <input type="text" class="form-control" name="{{userdetailform.postal_code.name}}" id="" aria-describedby="helpId" placeholder="{{information.postal_code}}" value="">
                  </div>

                  <!-- <div class="col-6">
                      <label class="form-label">Pin Code</label>
                      <input type="text" class="form-control" value="jhon">
                  </div> -->
                
                  <div class="col-12">
                    <label for="">Date of Birth- currently:({{information.date_of_birth}})</label>
                    <input type="date" class="form-control" name="{{userdetailform.date_of_birth.name}}" id="" aria-describedby="helpId" placeholder="" >
                   </div>
                  </div>
                  <div class="text-start mt-3">
                    <button type="submit" class="btn btn-primary px-4" style="border-color: rgb(0, 168, 0); background-color: rgb(0, 168, 0);">Save</button>
                 
                  </div>
                </div>
               </form>
              </div>
              <div class="card radius-10">
 
                <div class="col-12 col-xl-12">
                  <div class="card h-100">
                    <div class="card-header pb-0 p-3">
                      <div class="row">
                        <div class="col-md-8 d-flex align-items-center">
                          <h6 class="mb-0">Withdrawal Information</h6>
                        </div>
                        <div class="col-md-4 text-end">
                          <a href="javascript:;">
                            <i class="fas fa-user-edit text-secondary text-sm" data-bs-toggle="tooltip" data-bs-placement="top" title="Edit Profile"></i>
                          </a>
                        </div>
                      </div>
                    </div>
                    <div class="alert_message" id="alertUpdateaddress" style="background-color:{{color}};">
                      <span class="closebtn_message" onclick="this.parentElement.style.display='none';">&times;</span>
                      <p id="alertUpdateaddressMessage"></p>
                    </div>
                    <div class="card-body p-3">
                          <form action="" method="POST" id ="formWithdrawalDetail">
                           
                            <input type="hidden" name="form_type" value="formwithdrawaldetail" >
                            {% csrf_token%}
                            <h4>Bank Information</h4>
                              <div class="row">
                                <div class="col-lg-10">
                                  <div class="form-group">
                                    <label for="">Bank Name</label>
                                    <input type="text"
                                      class="form-control" name="{{withdrawaldetailform.bank_name.name}}" id="" aria-describedby="helpId" placeholder="{{user_bank_detail.bank_name}}" value="" >
                                  </div>
                                  <div class="form-group">
                                    <label for="">Account Name</label>
                                    <input type="text"
                                      class="form-control" name="{{withdrawaldetailform.account_name.name}}" id="" aria-describedby="helpId" placeholder="{{user_bank_detail.account_name}}" value="" >
                                  </div>
                                  <div class="form-group">
                                    <label for="">Account Number</label>
                                    <input type="text" class="form-control" name="{{withdrawaldetailform.account_number.name}}" id="" aria-describedby="helpId" placeholder="{{user_bank_detail.account_number}}" value="" >
                                  </div>
                                </div>
            
                                <div class="col-lg-2"></div>
            
                              </div>
            
                              <h4 class="mt-5"> Withdrawal Address</h4>
                              <div class="row">
                                <div class="col-lg-10" value="">
                                 <form>
                                
                                  <div class="form-group">
                                    <label for="">Bitcoin</label>
                                    <input type="text"
                                      class="form-control" name="{{withdrawaldetailform.btc.name}}" id="" aria-describedby="helpId" placeholder="{{user_address_detail.btc}}" value="" >
                                  </div>
                               
                                  <div class="form-group">
                                    <label for="">Ethereum</label>
                                    <input type="text"
                                      class="form-control" name="{{withdrawaldetailform.eth.name}}" id="" aria-describedby="helpId" placeholder="{{user_address_detail.eth}}" value="">
                                  </div>
                                  <div class="form-group">
                                    <label for="">BNB</label>
                                    <input type="text" class="form-control" name="{{withdrawaldetailform.bnb.name}}" id="" aria-describedby="helpId" placeholder="{{user_address_detail.bnb}}" value="">
                                  </div>
                                  <div class="form-group">
                                    <label for="">XRP</label>
                                    <input type="text" class="form-control" name="{{withdrawaldetailform.xrp.name}}" id="" aria-describedby="helpId" placeholder="{{user_address_detail.xrp}}" value="" >
                                  </div>
                                  <div class="form-group">
                                    <label for="">BCH</label>
                                    <input type="text" class="form-control" name="{{withdrawaldetailform.bch.name}}" id="" aria-describedby="helpId" placeholder="{{user_address_detail.bch}}" value="" >
                                  </div>
                                  <div class="form-group">
                                    <label for="">DODGE</label>
                                    <input type="text" class="form-control" name="{{withdrawaldetailform.dodge.name}}" id="" aria-describedby="helpId" placeholder="{{user_address_detail.dodge}}" value="">
                                  </div>
                                </div>
            
                                <div class="col-lg-2"></div>
             
                              </div>
                         
            
                          
            
                          <div class="update my-4">
                          <button type="submit" class="btn btn-primary align" style="border-color: rgb(0, 168, 0); background-color: rgb(0, 168, 0);">Save</button>
                        </div>
            
                        </form>
                    </div>
                  </div>
                </div>
            
               
              </div>


  <!--   Core JS Files   -->
  <script>
    const form_userdetail = document.getElementById("formUserDetail");
    
  
    form_userdetail.addEventListener("submit", submitHandler);
    function submitHandler(e){
        e.preventDefault()
        $.ajax({
            type:"POST",
            url :"{% url 'update_userdetail' %}",
            data :  $("#formUserDetail").serialize(),
  
            // data : $("#formWithdraw").serialize(),
            dataType:'json',
            success:function(data){
                if (data.msg === "Success"){
                    const alert = document.getElementById("alertUpdate");
                    alert.style.display = 'block';
                    alert.style.background = "green";
                    $("#alertUpdateMessage").text(data.response)
                    form_userdetail.reset()
                    
                    
                    
                    }
                else if (data.msg === "Invalid"){
                    const alert = document.getElementById("alertUpdate");
                    alert.style.display = 'block';
                    alert.style.background = "red";
                    $("#alertUpdateMessage").text(data.response)
                    }
                else if (data.msg === "Fail"){
                    const alert = document.getElementById("alertUpdate");
                    alert.style.display = 'block';
                    alert.style.background = "red";
                    $("#alertUpdateMessage").text(data.response)
                }
                else{
                    const alert = document.getElementById("alertUpdate");
                    alert.style.display = 'block';
                    alert.style.background = "red";
                    $("#alertUpdateMessage").text("An Unexpected Error Occured")
  
                  }
            }
    
  
          })
    }
  
    // withdrawal form
    const form_withdrawaldetail = document.getElementById("formWithdrawalDetail");
    form_withdrawaldetail.addEventListener("submit", submitHandlerWithdraw);
    function submitHandlerWithdraw(e){
        e.preventDefault()
        $.ajax({
            type:"POST",
            url :"{% url 'update_userwithdrawaldetail' %}",
            data :  $("#formWithdrawalDetail").serialize(),
  
            // data : $("#formWithdraw").serialize(),
            dataType:'json',
            success:function(data){
                if (data.msg === "Success1"){
                    const alert = document.getElementById("alertUpdateaddress");
                    alert.style.display = 'block';
                    alert.style.background = "green";
                    $("#alertUpdateaddressMessage").text(data.response)
                    // form_withdrawaldetail.reset()
                    
                    
                    
                    }
                else if (data.msg === "Invalid1"){
                    const alert = document.getElementById("alertUpdate");
                    alert.style.display = 'block';
                    alert.style.background = "red";
                    $("#alertUpdateMessage").text(data.response)
                    }
                else if (data.msg === "Failed1"){
                    const alert = document.getElementById("alertUpdate");
                    alert.style.display = 'block';
                    alert.style.background = "red";
                    $("#alertUpdateMessage").text(data.response)
                }
                else{
                    const alert = document.getElementById("alertUpdate");
                    alert.style.display = 'block';
                    alert.style.background = "red";
                    $("#alertUpdateMessage").text("An Unexpected Error Occured")
  
                  }
            }
    
  
          })
    }
  
  
  
    </script>
  
            
            </div>
          </div><!--end row-->



      </div>
      <!-- end page content-->
    </div>
    <!--end page content wrapper-->
    {%endblock%}
